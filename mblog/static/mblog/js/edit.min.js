"use strict";var getCSRFToken=function(){return document.querySelector("input[name=csrfmiddlewaretoken]").value},buttonSuccess=function(e){e.classList.add("green"),setTimeout(function(){e.classList.remove("green")},1e3)};!function(){var e=document.querySelector("#content_bg").getAttribute("post-id"),t=function(t){var n="/api/post/"+e,o=t.target,c=new Headers({"Content-Type":"application/json","X-CSRFToken":getCSRFToken()});if("update"==o.id){var u={content:document.querySelector("textarea").value,exist:document.getElementsByName("exist")[0].checked};fetch(n,{method:"PUT",body:JSON.stringify(u),headers:c}).then(function(e){return e.json()}).then(function(e){var t=document.querySelector("#update");buttonSuccess(t)})}else"delete"==o.id&&fetch(n,{method:"DELETE",headers:c}).then(function(e){return e.json()}).then(function(e){var t=document.querySelector("#delete");document.getElementsByName("exist")[0].checked=!1,buttonSuccess(t)})};document.querySelector("#form button#update").addEventListener("click",t),document.querySelector("#form button#delete").addEventListener("click",t),document.querySelector("#comment button").addEventListener("click",function(t){var n="/api/comment/"+e;fetch(n,{method:"POST",body:JSON.stringify({author:document.querySelector("input[name=author]").value,content:document.querySelector("input[name=content]").value}),headers:new Headers({"Content-Type":"application/json","X-CSRFToken":getCSRFToken()})}).then(function(e){return e.json()}).then(function(e){if(1==e.success){var t=document.querySelector("#comment button");buttonSuccess(t)}})})}();