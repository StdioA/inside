"use strict";var post_note=Vue.component("postnote",{template:"#post-note",data:function(){var t=["pink","blue","green","orange","yellow"],o=t[Math.floor(Math.random()*t.length)];return{color:o}},props:["post"],methods:{enter:function(t){var o=t.id;location.href="/"+o},get_summary:function(t){var o=t.content.split("\n").slice(0,3).map(function(t){return t.length>40&&(t=t.slice(0,40)+"â€¦"),t});return o}}}),app=new Vue({data:{ready:!1,posts:[],more:{more_lock:!1,posts_end:!1}},methods:{get_more:function(t){var o=6,e=this,n=this.posts[this.posts.length-1].id-1;e.more.more_lock||(e.more.more_lock=!0,fetch("api/archive/"+n+"/counts/"+o).then(function(t){return t.json()}).then(function(t){e.posts=e.posts.concat(t.posts),t.posts.length!=o&&(e.more.posts_end=!0),e.more.more_lock=!1}))}},init:function(){var t=this,o=Number(location.hash.replace("#",""));o=isNaN(o)||o<=0?"":String(o),fetch("/api/archive/"+o).then(function(t){return t.json()}).then(function(o){o.success?(t.posts=o.posts,t.ready=!0):location.href="/login"})}});!function(){app.$mount("#archives")}();