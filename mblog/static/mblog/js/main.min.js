"use strict";function getCookie(t){var e=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var s=jQuery.trim(o[n]);if(s.substring(0,t.length+1)==t+"="){e=decodeURIComponent(s.substring(t.length+1));break}}return e}var app=new Vue({data:{show:!0,error:{status:!1,message:""},post_id:0,previous_id:0,next_id:0,post:{},csrf_token:getCookie("csrftoken")},methods:{add_comment:function(t){var e=this,o={csrfmiddlewaretoken:getCookie("csrftoken"),author:$("input[name=author]").val(),content:$("input[name=content]").val()};$.post("/api/comment/"+this.post_id,o,function(t){t.success&&(e.post.comments.push({author:o.author,content:o.content}),$("input[name=author]").val(""),$("input[name=content]").val(""))},"JSON"),this.csrf_token=getCookie("csrftoken")},jump:function(t){var e;this.show=!1,"pageup"==t.target.id?e=this.previous_id:"pagedown"==t.target.id&&(e=this.next_id),$.getJSON("/api/"+e,function(t,o){app.show=!0,app.post_id=t.post.id,app.post=t.post,app.previous_id=t.previous_id,app.next_id=t.next_id,history.pushState({},"","/"+e)})}}});$(document).ready(function(){var t=["blue","green","yellow","purple"],e=t[Math.floor(Math.random()*t.length)];$("body").addClass("bg-"+e);var o=window.location.pathname.split("/")[1];$.getJSON("/api/"+o,function(t,e){"success"==e&&t.success?(app.post_id=t.post.id,app.post=t.post,app.previous_id=t.previous_id,app.next_id=t.next_id):(app.error.status=!0,app.error.message=t.reason),app.$mount("#content_bg")})});