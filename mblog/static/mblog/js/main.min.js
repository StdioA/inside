"use strict";function getCookie(t){var e=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var i=jQuery.trim(n[o]);if(i.substring(0,t.length+1)==t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e}var app=new Vue({data:{show:!0,error:{status:!1,message:""},post_id:0,previous_id:0,next_id:0,post:{},csrf_token:getCookie("csrftoken")},methods:{add_comment:function(t){var e=this,n={author:$("input[name=author]").val(),content:$("input[name=content]").val()};fetch("/api/comment/"+this.post_id,{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json","X-CSRFToken":getCookie("csrftoken")})}).then(function(t){return t.json()}).then(function(t){t.success&&(e.post.comments.push({author:n.author,content:n.content}),$("input[name=author]").val(""),$("input[name=content]").val(""))})["catch"](function(t){return console.error("Error:",t)}),this.csrf_token=getCookie("csrftoken")},jump:function(t){var e,n=this;n.show=!1,"pageup"==t.target.id?e=n.previous_id:"pagedown"==t.target.id&&(e=n.next_id),fetch("api/post/"+e,{credentials:"include"}).then(function(t){return t.json()}).then(function(t){n.show=!0,n.post_id=t.post.id,n.post=t.post,n.previous_id=t.previous_id,n.next_id=t.next_id,history.pushState({},"","/"+e)})}},init:function(){var t=window.location.pathname.split("/")[1],e=this;fetch("api/post/"+t,{credentials:"include"}).then(function(t){return t.json()}).then(function(t){t.success?(e.post_id=t.post.id,e.post=t.post,e.previous_id=t.previous_id,e.next_id=t.next_id):(e.error.status=!0,e.error.message=t.reason)})}});!function(){var t=["blue","green","yellow","purple"],e=t[Math.floor(Math.random()*t.length)];$("body").addClass("bg-"+e),app.$mount("#content_bg")}();